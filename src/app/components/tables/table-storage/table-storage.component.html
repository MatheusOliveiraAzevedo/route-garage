<section class="card rounded-4 table-responsive w-100">
    <table class="table m-0">
        <thead>
            <tr class="text-muted bg-light">
                <th class="p-2 w-50px text-center">Ação</th>
                <th class="p-2 min-w-150px">Nome</th>
                <th class="p-2 min-w-150px">Marca</th>
                <th class="p-2 min-w-150px">Modelo</th>
                <th class="p-2 min-w-150px">Ano/Fabricação</th>
                <th class="p-2 min-w-150px">Ano/Modelo</th>
                <th class="p-2 min-w-150px">Cor</th>
                <th class="p-2 min-w-150px">Status</th>
            </tr>
        </thead>
        <tbody>
            @if (storageCar() && storageCar().length !== 0) {
                @for (car of storageCar() | paginate: { itemsPerPage: 8, currentPage: paginaAtual };; track $index) {
                    <tr class="bg-hover-primary bg-table">
                        <td class="px-2 py-3 border-0">
                            <div ngbDropdown class="bg-hover-secondary rounded-4">
                                <lucide-icon ngbDropdownToggle class="noArrowDropdown  p-2" name="ellipsis" [size]="35"></lucide-icon>

                                <div class="rounded-4 bg-light" style="z-index: 2000;" ngbDropdownMenu container="body">
                                    <button class="d-flex justify-content-between align-items-center btn btn-primary border-0 rounded-0 bg-hover-primary" ngbDropdownItem (click)="openModal('edit', car)">Editar <lucide-icon name="square-pen" [size]="20"/></button>
                                    <button class="d-flex justify-content-between align-items-center btn btn-primary border-0 rounded-0 bg-hover-primary" ngbDropdownItem (click)="openModalExclude(car.id)">Excluir <lucide-icon name="trash-2" [size]="20"/></button>
                                </div>
                            </div>
                        </td>
                        <td class="px-2 py-3 border-0">{{car.name}}</td>
                        <td class="px-2 py-3 border-0">{{car.brand}}</td>
                        <td class="px-2 py-3 border-0">{{car.model}}</td>
                        <td class="px-2 py-3 border-0">{{car.yearFabrication}}</td>
                        <td class="px-2 py-3 border-0">{{car.yearModel}}</td>
                        <td class="px-2 py-3 border-0">{{car.color}}</td>
                        <td class="px-2 py-3 border-0"><app-tag-label>{{getStatus(car.status)}}</app-tag-label></td>
                    </tr>
                }
            }
        </tbody>
    </table>
    
</section>

@if (storageCar() && storageCar().length === 0) {
    <app-empty-list>Lista de clientes vazia</app-empty-list>
} @else {
    <pagination-controls class="fw-semibold pagination p-0 m-0" (pageChange)="paginaAtual = $event" [maxSize]="5" [responsive]="true" previousLabel="Anterior" nextLabel="Próximo"></pagination-controls>
}



<ng-template #modalStorage>
    <app-modal-base title="Novo cliente">
        <app-modal-storage [opt]="optModal" (reloadStorage)="getStorage()" [carSelected]="carSelected"></app-modal-storage>
    </app-modal-base>
</ng-template>

<ng-template #modalConfirm>
    <app-modal-base title="Excluir cliente">
        <app-modal-confirm message="Você tem certeza que deseja excluir?" (returnConfirm)="excludeItem()"></app-modal-confirm>
    </app-modal-base>
</ng-template>